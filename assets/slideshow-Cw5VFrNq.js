const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/level2-DwlTRHKo.js","assets/index-DJyayeK3.js","assets/index-Bwl-VxQ_.css"])))=>i.map(i=>d[i]);
import{i as e,n as t,r as n}from"./index-DJyayeK3.js";var r=class{sm;currentIndex=0;timer=0;slideDuration=5;paused=!1;pendingSlideIndex=null;eventListeners=[];constructor(e){this.sm=e}enter(){n.showScreen(`slideshow-screen`),this.currentIndex=0,this.showSlide(0),this.eventListeners=[];let e=document.getElementById(`slide-next`),r=document.getElementById(`slide-prev`),i=document.getElementById(`slide-finish`),a=document.getElementById(`slideshow-content`);if(e){let t=()=>{this.timer=0,this.nextSlide()};e.addEventListener(`click`,t),this.eventListeners.push({el:e,type:`click`,handler:t})}else console.warn(`Slideshow: nextBtn not found`);if(r){let e=()=>{this.timer=0,this.prevSlide()};r.addEventListener(`click`,e),this.eventListeners.push({el:r,type:`click`,handler:e})}else console.warn(`Slideshow: prevBtn not found`);if(i){let e=()=>{t(async()=>{let{Level2State:e}=await import(`./level2-DwlTRHKo.js`);return{Level2State:e}},__vite__mapDeps([0,1,2])).then(({Level2State:e})=>{this.sm.changeState(new e(this.sm))})};i.addEventListener(`click`,e),this.eventListeners.push({el:i,type:`click`,handler:e})}else console.warn(`Slideshow: finishBtn not found`);if(a){let e=()=>this.paused=!0,t=()=>this.paused=!1;a.addEventListener(`touchstart`,e),a.addEventListener(`touchend`,t),a.addEventListener(`mouseenter`,e),a.addEventListener(`mouseleave`,t),this.eventListeners.push({el:a,type:`touchstart`,handler:e},{el:a,type:`touchend`,handler:t},{el:a,type:`mouseenter`,handler:e},{el:a,type:`mouseleave`,handler:t})}}showSlide(t){t<0&&(t=e.memories.length-1),t>=e.memories.length&&(t=0),this.currentIndex=t,this.pendingSlideIndex=t;let n=e.memories[t],r=document.getElementById(`slide-img`),i=document.getElementById(`slide-text`),a=document.getElementById(`slide-progress`);r&&(r.onload=null,r.onerror=null,r.style.opacity=`0`,setTimeout(()=>{this.pendingSlideIndex===t&&(r.onload=()=>{this.pendingSlideIndex===t&&(r.style.opacity=`1`)},r.onerror=()=>{this.pendingSlideIndex===t&&(r.src=`data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiB2aWV3Qm94PSIwIDAgMTAwIDEwMCI+PHJlY3Qgd2lkdGg9IjEwMCIgaGVpZ2h0PSIxMDAiIGZpbGw9IiNkZGQiLz48dGV4dCB4PSI1MCIgeT0iNTAiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIyMCIgZmlsbD0iIzU1NSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPk5vIEltYWdlPC90ZXh0Pjwvc3ZnPg==`,r.style.opacity=`1`)},r.src=n.img)},200)),i&&(i.innerText=n.text),a&&(a.innerText=`${t+1} / ${e.memories.length}`);let o=document.getElementById(`slide-finish`);o&&(t===e.memories.length-1?(o.classList.remove(`hidden`),o.style.display=`block`):(o.classList.add(`hidden`),o.style.display=`none`))}nextSlide(){this.showSlide(this.currentIndex+1)}prevSlide(){this.showSlide(this.currentIndex-1)}update(t){this.paused||(this.timer+=t,this.timer>this.slideDuration&&(this.timer=0,this.currentIndex<e.memories.length-1&&this.nextSlide()))}draw(e){e.clear(`#000`)}resize(e,t){}exit(){this.eventListeners.forEach(({el:e,type:t,handler:n})=>{e.removeEventListener(t,n)}),this.eventListeners=[],n.hideScreen(`slideshow-screen`)}};export{r as SlideshowState};