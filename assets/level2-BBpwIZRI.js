const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/final-Betu3230.js","assets/index-BGKN3d4G.js","assets/index-BuF_uRMX.css"])))=>i.map(i=>d[i]);
var n=Object.defineProperty;var p=(l,t,e)=>t in l?n(l,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):l[t]=e;var i=(l,t,e)=>p(l,typeof t!="symbol"?t+"":t,e);import{U as r,G as o,_ as x}from"./index-BGKN3d4G.js";class m{constructor(t){i(this,"sm");i(this,"player",{x:50,y:0,w:30,h:50,vy:0});i(this,"fuel",100);i(this,"jumpSoundCooldown",0);i(this,"jumpSoundInterval",.12);i(this,"stars",[]);i(this,"collectedCount",0);i(this,"gravity",600);i(this,"thrust",-1400);i(this,"speedX",200);this.sm=t}enter(){r.showScreen("game-ui"),this.player.x=this.sm.renderer.width/2,this.player.y=this.sm.renderer.height-150,this.player.vy=0,this.fuel=100,this.collectedCount=0,this.jumpSoundCooldown=0,this.stars=[];const t=this.player.y-200;for(let e=0;e<30;e++)this.stars.push({x:50+Math.random()*(this.sm.renderer.width-100),y:t-e*200,r:15,active:!0});r.updateHUD(`Stars: 0/${o.level2StarsToWin}`)}update(t){this.jumpSoundCooldown=Math.max(0,this.jumpSoundCooldown-t),this.player.vy+=this.gravity*t;const e=this.sm.input.getAxis();e.x!==0&&(this.player.x+=e.x*this.speedX*t);const s=this.sm.input.isActionActive();s&&this.fuel>0?(this.player.vy+=this.thrust*t,this.fuel-=30*t,this.jumpSoundCooldown<=0&&(this.sm.audio.play("jump"),this.jumpSoundCooldown=this.jumpSoundInterval)):!s&&this.fuel<100&&(this.fuel=Math.min(100,this.fuel+10*t)),this.player.y+=this.player.vy*t,this.player.x<0&&(this.player.x=0),this.player.x>this.sm.renderer.width-this.player.w&&(this.player.x=this.sm.renderer.width-this.player.w);const h=this.sm.renderer.height-150;this.player.y>h&&(this.player.y=h,this.player.vy=0),this.stars.forEach(a=>{if(!a.active)return;const y=this.player.x+this.player.w/2,c=this.player.y+this.player.h/2;Math.sqrt((y-a.x)**2+(c-a.y)**2)<30+a.r&&(a.active=!1,this.collectedCount++,this.sm.audio.play("collect"),this.checkWin())}),r.updateHUD(`Stars: ${this.collectedCount}/${o.level2StarsToWin} | Fuel: ${Math.floor(this.fuel)}%`)}checkWin(){this.collectedCount>=o.level2StarsToWin&&(this.sm.audio.play("win"),x(async()=>{const{FinalState:t}=await import("./final-Betu3230.js");return{FinalState:t}},__vite__mapDeps([0,1,2])).then(({FinalState:t})=>{this.sm.changeState(new t(this.sm))}))}draw(t){const e=-this.player.y+t.height*.6,s=t.ctx.createLinearGradient(0,0,0,t.height);s.addColorStop(0,"#020024"),s.addColorStop(1,"#090979"),t.ctx.fillStyle=s,t.ctx.fillRect(0,0,t.width,t.height),t.ctx.save(),t.ctx.translate(0,e),this.stars.forEach(h=>{h.active&&(t.ctx.fillStyle=`hsl(${Date.now()/10%360}, 70%, 70%)`,t.ctx.beginPath(),t.ctx.arc(h.x,h.y,h.r,0,Math.PI*2),t.ctx.fill())}),t.ctx.fillStyle="#ff4081",t.ctx.beginPath(),t.ctx.moveTo(this.player.x+this.player.w/2,this.player.y),t.ctx.lineTo(this.player.x+this.player.w,this.player.y+this.player.h),t.ctx.lineTo(this.player.x,this.player.y+this.player.h),t.ctx.fill(),this.sm.input.isActionActive()&&this.fuel>0&&(t.ctx.fillStyle="orange",t.ctx.beginPath(),t.ctx.moveTo(this.player.x+10,this.player.y+this.player.h),t.ctx.lineTo(this.player.x+this.player.w/2,this.player.y+this.player.h+25+Math.random()*15),t.ctx.lineTo(this.player.x+this.player.w-10,this.player.y+this.player.h),t.ctx.fill()),t.ctx.restore(),t.ctx.fillStyle="#333",t.ctx.fillRect(10,60,100,10),t.ctx.fillStyle=this.fuel>20?"#0f0":"#f00",t.ctx.fillRect(10,60,this.fuel,10),t.ctx.strokeStyle="#fff",t.ctx.strokeRect(10,60,100,10)}resize(t,e){this.player.x=Math.max(0,Math.min(t-this.player.w,this.player.x)),this.stars.forEach(s=>{s.x=Math.max(50,Math.min(t-50,s.x))})}exit(){r.hideScreen("game-ui")}}export{m as Level2State};
