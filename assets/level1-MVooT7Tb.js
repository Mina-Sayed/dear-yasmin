const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/codeGate-Doh3qn-D.js","assets/index-CJydfg8L.js","assets/index-Bwl-VxQ_.css"])))=>i.map(i=>d[i]);
import{i as e,n as t,r as n}from"./index-CJydfg8L.js";var r=class{sm;player={x:0,y:0,r:12,speed:250};collectibles=[];collectedCount=0;isPaused=!1;constructor(e){this.sm=e}enter(){n.showScreen(`game-ui`);let t=e.memories.length;n.updateHUD(`Collect all ${t} hearts! ❤️`),this.player.x=this.sm.renderer.width/2,this.player.y=this.sm.renderer.height/2,this.collectibles=e.memories.map(e=>{let t,n,r,i=0;do{t=50+Math.random()*(this.sm.renderer.width-100),n=50+Math.random()*(this.sm.renderer.height-100);let e=t-this.player.x,a=n-this.player.y;r=Math.sqrt(e*e+a*a),i++}while(r<100&&i<50);return{x:t,y:n,r:15,active:!0,id:e.id}}),this.collectedCount=0}update(e){if(this.isPaused)return;let t=this.sm.input.getAxis();(t.x!==0||t.y!==0)&&(this.player.x+=t.x*this.player.speed*e,this.player.y+=t.y*this.player.speed*e),this.player.x=Math.max(15,Math.min(this.sm.renderer.width-15,this.player.x)),this.player.y=Math.max(15,Math.min(this.sm.renderer.height-15,this.player.y)),this.collectibles.forEach(e=>{if(!e.active)return;let t=e.x,n=e.y+e.r/2,r=t-this.player.x,i=n-this.player.y;Math.sqrt(r*r+i*i)<this.player.r+e.r&&this.collect(e)})}collect(r){r.active=!1,this.collectedCount++,this.sm.audio.play(`collect`),this.isPaused=!0;let i=e.memories.find(e=>e.id===r.id);n.showModal(`Captured a Memory!`,i?.img||``,i?.text||``,()=>{this.isPaused=!1,n.updateHUD(`Hearts: ${this.collectedCount}/${e.memories.length}`),this.collectedCount>=e.memories.length&&setTimeout(()=>{t(async()=>{let{CodeState:e}=await import(`./codeGate-Doh3qn-D.js`);return{CodeState:e}},__vite__mapDeps([0,1,2])).then(({CodeState:e})=>{this.sm.changeState(new e(this.sm))})},500)})}draw(t){t.clear(`#1b1b2f`),t.ctx.strokeStyle=`rgba(255,255,255,0.05)`,t.ctx.lineWidth=1;for(let e=0;e<t.width;e+=50)t.ctx.beginPath(),t.ctx.moveTo(e,0),t.ctx.lineTo(e,t.height),t.ctx.stroke();for(let e=0;e<t.height;e+=50)t.ctx.beginPath(),t.ctx.moveTo(0,e),t.ctx.lineTo(t.width,e),t.ctx.stroke();this.collectibles.forEach(e=>{if(!e.active)return;let n=Math.sin(Date.now()/200)*3;t.drawHeart(e.x,e.y,e.r*1.5+n,`#ff4081`)}),t.ctx.shadowBlur=15,t.ctx.shadowColor=`rgba(255, 255, 255, 0.5)`,t.ctx.fillStyle=`#fff`,t.ctx.beginPath(),t.ctx.arc(this.player.x,this.player.y,this.player.r,0,Math.PI*2),t.ctx.fill(),t.ctx.shadowBlur=0,t.ctx.fillStyle=`rgba(255,255,255,0.8)`,t.ctx.font=`14px Outfit`,t.ctx.textAlign=`center`,t.ctx.fillText(e.heroName,this.player.x,this.player.y-25)}resize(e,t){this.player.x=Math.max(15,Math.min(e-15,this.player.x)),this.player.y=Math.max(15,Math.min(t-15,this.player.y)),this.collectibles.forEach(n=>{n.active&&(n.x=Math.max(50,Math.min(e-50,n.x)),n.y=Math.max(50,Math.min(t-50,n.y)))})}exit(){n.hideScreen(`game-ui`)}};export{r as Level1State};