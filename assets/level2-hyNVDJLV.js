const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/final-DZAVx3rV.js","assets/index-AkPmfAVE.js","assets/index-Bwl-VxQ_.css"])))=>i.map(i=>d[i]);
import{i as e,n as t,r as n}from"./index-AkPmfAVE.js";var r=class{sm;player={x:50,y:0,w:30,h:50,vy:0};fuel=100;stars=[];collectedCount=0;gravity=600;thrust=-1400;speedX=200;constructor(e){this.sm=e}enter(){n.showScreen(`game-ui`),this.player.x=this.sm.renderer.width/2,this.player.y=this.sm.renderer.height-150,this.player.vy=0,this.fuel=100,this.collectedCount=0,this.stars=[];let t=this.player.y-200;for(let e=0;e<30;e++)this.stars.push({x:50+Math.random()*(this.sm.renderer.width-100),y:t-e*200,r:15,active:!0});n.updateHUD(`Stars: 0/${e.level2StarsToWin}`)}update(t){this.player.vy+=this.gravity*t;let r=this.sm.input.getAxis();r.x!==0&&(this.player.x+=r.x*this.speedX*t);let i=this.sm.input.actionPressed||this.sm.input.keys.Space;i&&this.fuel>0?(this.player.vy+=this.thrust*t,this.fuel-=30*t,this.sm.audio.play(`jump`)):!i&&this.fuel<100&&(this.fuel=Math.min(100,this.fuel+10*t)),this.player.y+=this.player.vy*t,this.player.x<0&&(this.player.x=0),this.player.x>this.sm.renderer.width-this.player.w&&(this.player.x=this.sm.renderer.width-this.player.w);let a=this.sm.renderer.height-150;this.player.y>a&&(this.player.y=a,this.player.vy=0),this.stars.forEach(e=>{if(!e.active)return;let t=this.player.x+this.player.w/2,n=this.player.y+this.player.h/2;Math.sqrt((t-e.x)**2+(n-e.y)**2)<30+e.r&&(e.active=!1,this.collectedCount++,this.sm.audio.play(`collect`),this.checkWin())}),n.updateHUD(`Stars: ${this.collectedCount}/${e.level2StarsToWin} | Fuel: ${Math.floor(this.fuel)}%`)}checkWin(){this.collectedCount>=e.level2StarsToWin&&(this.sm.audio.play(`win`),t(async()=>{let{FinalState:e}=await import(`./final-DZAVx3rV.js`);return{FinalState:e}},__vite__mapDeps([0,1,2])).then(({FinalState:e})=>{this.sm.changeState(new e(this.sm))}))}draw(e){let t=-this.player.y+e.height*.6,n=e.ctx.createLinearGradient(0,0,0,e.height);n.addColorStop(0,`#020024`),n.addColorStop(1,`#090979`),e.ctx.fillStyle=n,e.ctx.fillRect(0,0,e.width,e.height),e.ctx.save(),e.ctx.translate(0,t),this.stars.forEach(t=>{t.active&&(e.ctx.fillStyle=`hsl(${Date.now()/10%360}, 70%, 70%)`,e.ctx.beginPath(),e.ctx.arc(t.x,t.y,t.r,0,Math.PI*2),e.ctx.fill())}),e.ctx.fillStyle=`#ff4081`,e.ctx.beginPath(),e.ctx.moveTo(this.player.x+this.player.w/2,this.player.y),e.ctx.lineTo(this.player.x+this.player.w,this.player.y+this.player.h),e.ctx.lineTo(this.player.x,this.player.y+this.player.h),e.ctx.fill(),(this.sm.input.actionPressed||this.sm.input.keys.Space)&&this.fuel>0&&(e.ctx.fillStyle=`orange`,e.ctx.beginPath(),e.ctx.moveTo(this.player.x+10,this.player.y+this.player.h),e.ctx.lineTo(this.player.x+this.player.w/2,this.player.y+this.player.h+25+Math.random()*15),e.ctx.lineTo(this.player.x+this.player.w-10,this.player.y+this.player.h),e.ctx.fill()),e.ctx.restore(),e.ctx.fillStyle=`#333`,e.ctx.fillRect(10,60,100,10),e.ctx.fillStyle=this.fuel>20?`#0f0`:`#f00`,e.ctx.fillRect(10,60,this.fuel,10),e.ctx.strokeStyle=`#fff`,e.ctx.strokeRect(10,60,100,10)}resize(e,t){this.player.x=Math.max(0,Math.min(e-this.player.w,this.player.x)),this.stars.forEach(t=>{t.x=Math.max(50,Math.min(e-50,t.x))})}exit(){n.hideScreen(`game-ui`)}};export{r as Level2State};